digraph HitlReviewGate {
    graph [
        goal="Ship a safe patch with human review"
    ]

    start [shape=Mdiamond, label="Start"]
    implement [
        shape=box,
        label="Implement",
        prompt="Draft the patch for: $goal"
    ]
    review_gate [
        shape=hexagon,
        label="Review Outcome",
        human_default_choice="A",
        human_timeout_seconds=30
    ]
    refine [
        shape=box,
        label="Refine",
        prompt="Apply reviewer feedback and improve the patch"
    ]
    ship [
        shape=box,
        label="Ship",
        prompt="Prepare final release notes and rollout steps"
    ]
    exit [shape=Msquare, label="Exit"]

    start -> implement -> review_gate
    review_gate -> ship [label="[A] Approve"]
    review_gate -> refine [label="[R] Request Changes"]
    refine -> review_gate
    ship -> exit
}
