digraph ParallelTriageFanIn {
    graph [
        goal="Diagnose issue, compare options, and pick a direction"
    ]

    start [shape=Mdiamond, label="Start"]
    triage [
        shape=component,
        label="Parallel Triage",
        join_policy="all_success",
        max_parallel=3
    ]

    investigate_logs [shape=box, label="Investigate Logs", prompt="Analyze logs and summarize likely root causes"]
    inspect_tests [shape=box, label="Inspect Tests", prompt="Run through failing tests and summarize breakpoints"]
    review_recent_changes [shape=box, label="Review Recent Changes", prompt="Identify risky recent changes and likely regressions"]

    merge_findings [
        shape=tripleoctagon,
        label="Merge Findings"
    ]
    decision_gate [
        shape=hexagon,
        label="Choose Direction",
        human_default_choice="F",
        human_timeout_seconds=45
    ]
    fast_fix [shape=box, label="Fast Fix", prompt="Create a minimal-risk fast fix plan"]
    deep_fix [shape=box, label="Deep Fix", prompt="Create a full remediation plan with validation strategy"]
    exit [shape=Msquare, label="Exit"]

    start -> triage
    triage -> investigate_logs [label="logs"]
    triage -> inspect_tests [label="tests"]
    triage -> review_recent_changes [label="changes"]

    investigate_logs -> merge_findings
    inspect_tests -> merge_findings
    review_recent_changes -> merge_findings

    merge_findings -> decision_gate
    decision_gate -> fast_fix [label="[F] Fast Fix"]
    decision_gate -> deep_fix [label="[D] Deep Fix"]

    fast_fix -> exit
    deep_fix -> exit
}
